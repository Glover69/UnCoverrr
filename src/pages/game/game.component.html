
<section class="main-container w-full min-h-screen flex items-center justify-center">

  @if (state === 'countdown') {
    @if (countdownNumber() === 0) {
      <div class="countdown-number font-bold text-[15rem]">GO!</div>
    } @else {
      <div class="countdown-number opacity-0 font-bold text-[20rem]">{{ countdownNumber() }}</div>
    }

  } @else if (state === 'playing'){
    <div class="flex w-full h-full flex-col items-center justify-center gap-16 p-4 md:px-16 lg:px-32">
      <div class="top-bar flex items-center justify-between w-full">
        <!-- Total Score -->
        <div class="flex flex-col items-center gap-1 w-24 md:w-32">
          <div class="flex flex-col items-center gap-1">
            <span class="font-medium text-sm md:text-base lg:text-lg">‚≠êÔ∏è</span>
            <span class="font-medium whitespace-nowrap opacity-60 md:text-base lg:text-lg">Score</span>
          </div>
          <span class="font-bold text-3xl md:text-4xl lg:text-5xl">{{totalPoints()}}</span>
        </div>

        <!-- Timer -->
        <div class="flex flex-col items-center gap-1 w-24 md:w-32">
          <div class="flex flex-col items-center gap-1">
            <span class="font-medium text-sm md:text-base lg:text-lg">‚è≥</span>
            <span class="font-medium opacity-60 md:text-base lg:text-lg">Timer</span>
          </div>
        <span class="font-bold text-5xl md:text-7xl text-center w-20 md:w-32">{{timeRemaining()}}<span class="text-2xl md:text-3xl font-bold opacity-60">s</span></span>
        </div>

        <!-- Streak counter -->
        <div class="flex flex-col items-center gap-1 w-24 md:w-32">
          <div class="flex flex-col items-center gap-1">
            <span class="font-medium text-sm md:text-base lg:text-lg">üî•</span>
            <span class="font-medium opacity-60 md:text-base lg:text-lg">Streak</span>
          </div>
          <span class="font-bold text-3xl md:text-4xl lg:text-5xl">x{{streak()}}</span>
        </div>
      </div>



        <div class="w-72 h-72 lg:w-96 lg:h-96 rounded-lg overflow-hidden">
          <img [src]="currentQuestion()!.albumCover" class="object-cover w-full h-full" alt="album-cover">
        </div>

      <div class="options-group grid grid-cols-2 grid-rows-2 items-center gap-3 w-full lg:px-24">
        <div (click)="chooseAnswer(currentQuestion()!.options[0])" class="single-option cursor-pointer w-full p-4 md:p-6 text-center rounded-lg bg-[#E32542] text-white font-bold text-sm whitespace-nowrap md:text-lg">{{currentQuestion()!.options[0]}}</div>
        <div (click)="chooseAnswer(currentQuestion()!.options[1])" class="single-option cursor-pointer w-full p-4 md:p-6 text-center rounded-lg bg-[#1D6DD0] text-white font-bold text-sm whitespace-nowrap md:text-lg">{{currentQuestion()!.options[1]}}</div>
        <div (click)="chooseAnswer(currentQuestion()!.options[2])" class="single-option cursor-pointer w-full p-4 md:p-6 text-center rounded-lg bg-[#DAA117] text-white font-bold text-sm whitespace-nowrap md:text-lg">{{currentQuestion()!.options[2]}}</div>
        <div (click)="chooseAnswer(currentQuestion()!.options[3])" class="single-option cursor-pointer w-full p-4 md:p-6 text-center rounded-lg bg-[#32931B] text-white font-bold text-sm whitespace-nowrap md:text-lg">{{currentQuestion()!.options[3]}}</div>
      </div>


    </div>
  } @else if (state === 'ended'){

    <div class="ended-container flex w-full h-full flex-col items-center justify-center gap-8 p-4 md:px-16 lg:px-32">
      <div class="ended-header flex flex-col items-center opacity-0 gap-2">
        <img class="w-32" src="/images/trophy.png" alt="">
        <span class="font-semibold uppercase">Session Completed</span>
        <span class="font-bold text-4xl tracking-tighter">Daily Ranking</span>
      </div>

      <div class="flex flex-col items-center gap-2">
       <div class="card-total-score opacity-0 border border-gray-200 px-5 py-5 md:py-9 rounded-xl w-56 md:w-full md:max-w-lg flex flex-col items-center">
         <span class="font-semibold uppercase">Your Performance</span>
         <span class="font-bold text-6xl tracking-tighter">{{totalPoints()}}</span>
         <div class="badge text-center mt-4 w-fit py-1 px-4 rounded-full border-2 text-xs border-brand-200 text-white bg-brand-500">
           Top 5% Global
         </div>
       </div>

       <div class="card-other-stats opacity-0 border border-gray-200 p-4 md:p-5 rounded-xl mt-4 md:mt-0 w-fit max-w-lg flex items-center gap-3 md:gap-6">
         <div class="stat bg-green-200 p-4 flex flex-col text-white rounded-lg items-center">
             <span class="font-bold text-sm md:text-base text-gray-800 opacity-60">Accuracy</span>
             <span class="font-bold accuracy-txt text-2xl md:text-3xl text-green-600">{{this.accuracy()}}%</span>
           </div>

           <div class="stat bg-blue-200 p-4 flex flex-col text-white rounded-lg items-center">
             <span class="font-bold text-sm md:text-base text-gray-800 opacity-60">Correct</span>
             <span class="font-bold text-2xl md:text-3xl text-blue-600">{{totalCorrect()}}/{{totalAnswered()}}</span>
           </div>

           <div class="stat bg-red-200 p-4 flex flex-col text-white rounded-lg items-center">
             <span class="font-bold text-sm md:text-base text-gray-800 opacity-60">Best Streak</span>
             <span class="font-bold text-2xl md:text-3xl text-red-600">üî•{{bestStreak()}}</span>
           </div>
       </div>
      </div>




    </div>

  }


</section>
